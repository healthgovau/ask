id: sample_media_audio
label: Sample Media - Audio
migration_tags:
  - health_sample_content
  - health_sample_media
  - health_sample_media_audio
source:
  plugin: embedded_data
  data_rows:
    - id: 10
      file: 'https://www2.cs.uic.edu/~i101/SoundFiles/StarWars3.wav'
  ids:
    id:
      type: integer
process:
  pseudo_destination_filename:
    - plugin: callback
      callable: basename
      source: file
    - plugin: skip_on_empty
      method: row
      message: 'Cannot import empty filename.'
  pseudo_destionation_path:
    - plugin: concat
      source:
        - '@pseudo_destination_filename'
  name: '@pseudo_destination_filename'
  'field_media_audio_file/target_id':
    plugin: migration_lookup
    migration: sample_file_document
    source: id
  uid:
    plugin: default_value
    default_value: 1
destination:
  plugin: 'entity:media'
  default_bundle: audio
migration_dependencies:
  required:
    - sample_media_file
    - sample_file_document
